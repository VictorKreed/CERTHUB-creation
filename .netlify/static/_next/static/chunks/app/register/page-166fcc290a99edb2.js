(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{2919:(e,t,s)=>{Promise.resolve().then(s.bind(s,8019))},8019:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(5155),a=s(2115),l=s(6874),i=s.n(l),n=s(6634),d=s(2085),o=s(2596),c=s(9688);let u=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function h(e){let{className:t,variant:s,size:a,asChild:l=!1,...i}=e,d=l?n.DX:"button";return(0,r.jsx)(d,{"data-slot":"button",className:function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,o.$)(t))}(u({variant:s,size:a,className:t})),...i})}var g=s(6172);let m={institutionName:"",institutionType:"",industryOrSector:"",legalOrOperatingAddress:"",emailAddress:"",websiteUrlOrDomainName:"",walletAddress1:"",walletAddress2:"",walletAddress3:""};function x(){let[e,t]=(0,a.useState)(m),[s,l]=(0,a.useState)(null),[n,d]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),[u,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{await (0,g.LK)();let s=await (0,g.Vy)();l(s),s&&!e.walletAddress1&&t(e=>({...e,walletAddress1:s}))}catch(e){}})()},[]);let p=(0,a.useMemo)(()=>{if(!s)return!1;let t=s.toLowerCase();return[e.walletAddress1,e.walletAddress2,e.walletAddress3].filter(Boolean).map(e=>e.toLowerCase()).includes(t)},[s,e.walletAddress1,e.walletAddress2,e.walletAddress3]),w=(0,a.useMemo)(()=>{let t=e=>/^0x[a-fA-F0-9]{40}$/.test(e),s=/\S+@\S+\.\S+/.test(e.emailAddress);return e.institutionName.trim().length>1&&e.institutionType.trim().length>1&&e.industryOrSector.trim().length>1&&e.legalOrOperatingAddress.trim().length>3&&s&&e.websiteUrlOrDomainName.trim().length>3&&t(e.walletAddress1)&&(!e.walletAddress2||t(e.walletAddress2))&&(!e.walletAddress3||t(e.walletAddress3))},[e]);function b(e,s){if("websiteUrlOrDomainName"===e&&s&&!/^https?:\/\//i.test(s)){t(t=>({...t,[e]:s}));return}t(t=>({...t,[e]:s}))}async function v(t){if(t.preventDefault(),x(null),c(null),!w){x("Please complete all required fields with valid values.");return}if(!p){x("The connected wallet must be listed as Wallet 1, 2, or 3. Connect the correct wallet and try again.");return}try{var s,r;d(!0);let t=await (0,g.C8)(),a=await t.registerInstitution(e.institutionName,e.institutionType,e.industryOrSector,e.legalOrOperatingAddress,e.emailAddress,e.websiteUrlOrDomainName,e.walletAddress1,e.walletAddress2||"0x0000000000000000000000000000000000000000",e.walletAddress3||"0x0000000000000000000000000000000000000000"),l=await a.wait();c(null!==(r=null!==(s=null==l?void 0:l.hash)&&void 0!==s?s:null==a?void 0:a.hash)&&void 0!==r?r:null)}catch(e){x((null==e?void 0:e.reason)||(null==e?void 0:e.shortMessage)||(null==e?void 0:e.message)||"Transaction failed. Please check your wallet and try again.")}finally{d(!1)}}return(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-[#0b0f1a] to-black text-white",children:(0,r.jsxs)("div",{className:"mx-auto max-w-4xl px-6 py-12",children:[(0,r.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,r.jsx)(i(),{href:"/",className:"text-xl font-semibold tracking-tight",children:"CERTHUB"}),(0,r.jsx)("div",{className:"text-sm",children:s?(0,r.jsxs)("span",{className:"rounded-md bg-emerald-500/10 px-3 py-1 text-emerald-300",children:["✅ Connected: ",s.slice(0,6),"…",s.slice(-4)]}):(0,r.jsx)("span",{className:"rounded-md bg-yellow-500/10 px-3 py-1 text-yellow-300",children:"⚠️ Please connect your wallet"})})]}),(0,r.jsxs)("section",{className:"mb-10",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold leading-tight",children:"Register Your Institution"}),(0,r.jsx)("p",{className:"mt-2 text-white/70",children:"Use one of the wallets you list below to submit this transaction. A factory agent will verify your registration before you can issue certificates."})]}),(0,r.jsxs)("form",{onSubmit:v,className:"grid gap-6",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Institution Name *"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.institutionName,onChange:e=>b("institutionName",e.target.value),placeholder:"e.g., Alpha University",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Institution Type *"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.institutionType,onChange:e=>b("institutionType",e.target.value),placeholder:"University / Accreditor / Training Org",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Industry or Sector *"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.industryOrSector,onChange:e=>b("industryOrSector",e.target.value),placeholder:"Education, Healthcare, Tech…",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Legal or Operating Address *"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.legalOrOperatingAddress,onChange:e=>b("legalOrOperatingAddress",e.target.value),placeholder:"123 Blockchain St, City, Country",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Email Address *"}),(0,r.jsx)("input",{type:"email",className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.emailAddress,onChange:e=>b("emailAddress",e.target.value),placeholder:"admin@alpha.edu",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Website / Domain *"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.websiteUrlOrDomainName,onChange:e=>b("websiteUrlOrDomainName",e.target.value),placeholder:"alpha.edu or https://alpha.edu",required:!0})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsx)("p",{className:"mb-4 text-sm text-white/70",children:"Wallets (the connected wallet must be one of these)"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Wallet 1 *"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.walletAddress1,onChange:e=>b("walletAddress1",e.target.value),placeholder:"0x...",required:!0}),s&&e.walletAddress1&&s.toLowerCase()===e.walletAddress1.toLowerCase()&&(0,r.jsx)("span",{className:"text-xs text-emerald-400",children:"Connected"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Wallet 2 (optional)"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.walletAddress2,onChange:e=>b("walletAddress2",e.target.value),placeholder:"0x..."}),s&&e.walletAddress2&&s.toLowerCase()===e.walletAddress2.toLowerCase()&&(0,r.jsx)("span",{className:"text-xs text-emerald-400",children:"Connected"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Wallet 3 (optional)"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.walletAddress3,onChange:e=>b("walletAddress3",e.target.value),placeholder:"0x..."}),s&&e.walletAddress3&&s.toLowerCase()===e.walletAddress3.toLowerCase()&&(0,r.jsx)("span",{className:"text-xs text-emerald-400",children:"Connected"})]})]}),!p&&(0,r.jsx)("div",{className:"mt-3 text-xs text-amber-400",children:"Note: Connect a wallet that appears as Wallet 1, 2, or 3. The contract will reject others."})]}),u&&(0,r.jsx)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-300",children:u}),o&&(0,r.jsxs)("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-3 text-sm text-emerald-300",children:["Registration submitted."," ",(0,r.jsx)("a",{className:"ml-1 inline-block rounded-md bg-slate-800 px-3 py-1 text-xs text-cyan-300 underline hover:bg-slate-700",href:"https://hyperion-testnet-explorer.metisdevops.link/tx/".concat(o),target:"_blank",rel:"noreferrer",children:"View on Explorer"}),(0,r.jsxs)("p",{className:"mt-2 text-xs text-white/60",children:["After confirmation, a factory agent must call ",(0,r.jsx)("code",{children:"verifyInstitution"}),". Only then will you be able to issue certificates."]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(h,{type:"submit",disabled:n||!w,children:n?"Submitting…":"Register Institution"}),(0,r.jsx)(i(),{href:"/",className:"text-white/70 hover:underline",children:"Back to Home"})]})]}),(0,r.jsxs)("div",{className:"mt-10 rounded-xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"What happens next?"}),(0,r.jsxs)("ul",{className:"list-disc space-y-1 pl-5 text-sm text-white/70",children:[(0,r.jsxs)("li",{children:["On-chain ",(0,r.jsx)("em",{children:"InstitutionRegistered"})," event is emitted."]}),(0,r.jsx)("li",{children:"A factory agent reviews and verifies your institution on the factory."}),(0,r.jsx)("li",{children:"Once verified, you can issue certificate clones and manage them."})]})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,41,366,172,441,684,358],()=>t(2919)),_N_E=e.O()}]);