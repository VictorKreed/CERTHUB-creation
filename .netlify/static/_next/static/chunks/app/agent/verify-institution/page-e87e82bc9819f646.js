(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{1439:(e,t,s)=>{"use strict";s.d(t,{F:()=>i});let i={id:133717,name:"Metis Hyperion Testnet",nativeCurrency:{name:"Test Metis",symbol:"tMETIS",decimals:18},rpcUrls:{default:{http:["https://hyperion-testnet.metisdevops.link"]}},blockExplorers:{default:{name:"Hyperion Explorer",url:"https://hyperion-testnet-explorer.metisdevops.link"}},testnet:!0}},1973:(e,t,s)=>{"use strict";s.d(t,{k:()=>n});var i=s(9592),r=s(3041);class n extends r._y{#e;#t;constructor(e,t,s){let r=Object.assign({},null!=s?s:{},{batchMaxCount:1});(0,i.MR)(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,r),this.#t=null,s&&s.providerInfo&&(this.#t=s.providerInfo),this.#e=async(t,s)=>{let i={method:t,params:s};this.emit("debug",{action:"sendEip1193Request",payload:i});try{let t=await e.request(i);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(t){let e=Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=i,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){(0,i.MR)(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);let t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){let e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new n(e.provider);let t=e.window?e.window:"undefined"!=typeof window?window:null;if(null==t)return null;let s=e.anyProvider;if(s&&t.ethereum)return new n(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;let r=e.timeout?e.timeout:300;return 0===r?null:await new Promise((a,l)=>{let d=[],o=e=>{d.push(e.detail),s&&c()},c=()=>{if(clearTimeout(u),d.length){if(e&&e.filter){let t=e.filter(d.map(e=>Object.assign({},e.info)));if(null==t)a(null);else if(t instanceof n)a(t);else{let e=null;if(t.uuid&&(e=d.filter(e=>t.uuid===e.info.uuid)[0]),e){let{provider:t,info:s}=e;a(new n(t,void 0,{providerInfo:s}))}else l((0,i.xz)("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{let{provider:e,info:t}=d[0];a(new n(e,void 0,{providerInfo:t}))}}else a(null);t.removeEventListener("eip6963:announceProvider",o)},u=setTimeout(()=>{c()},r);t.addEventListener("eip6963:announceProvider",o),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}},8450:(e,t,s)=>{Promise.resolve().then(s.bind(s,8951))},8951:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var i=s(5155),r=s(6874),n=s.n(r),a=s(2115),l=s(3041),d=s(6872),o=s(5062),c=s(2037),u=s(6172),m=s(1439),h=s(9946);let x=(0,h.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),p=(0,h.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),f={institutionName:"",institutionWalletAddress:""};function w(){let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)(!1),[h,w]=(0,a.useState)(f),[y,b]=(0,a.useState)(!1),[g,v]=(0,a.useState)(null),[N,j]=(0,a.useState)(null),[A,E]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{await (0,u.LK)();let e=await (0,u.Vy)();if(t(e),e){let t=await (0,u.Qq)(e);if(r(t),t){let e=await (0,u.qo)(),t=new l.FR("https://hyperion-testnet.metisdevops.link"),s=new d.NZ("0xC04b063F5Fd9F03B67359DE79d3b18a55f73cB0c",[{inputs:[{name:"",type:"string"},{name:"",type:"address"}],name:"verified_institutions",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"}],t),i=await Promise.all(e.map(async e=>({...e,verified:await s.verified_institutions(e.name,e.walletAddress)})));E(i)}}}catch(e){console.error("Initialization failed:",e)}})()},[]);let k=(0,o.PW)(h.institutionWalletAddress)&&h.institutionName.trim().length>1;function C(e,t){w(s=>({...s,[e]:t}))}async function I(){if(!k){v("Please provide a valid institution name and wallet address.");return}try{b(!0),v(null),j(null);let e=await (0,u.C8)(),t=await e.verifyInstitution(h.institutionName,(0,c.b)(h.institutionWalletAddress));await t.wait(),j("Institution ".concat(h.institutionName," verified successfully!")),w(f),E(e=>e.map(e=>e.name===h.institutionName&&e.walletAddress.toLowerCase()===(0,c.b)(h.institutionWalletAddress).toLowerCase()?{...e,verified:!0}:e))}catch(e){v(e.reason||e.message||"Failed to verify institution. Ensure details match registration records.")}finally{b(!1)}}async function S(e,t){try{b(!0),v(null),j(null);let s=await (0,u.C8)(),i=await s.unverifyInstitution(e,(0,c.b)(t));await i.wait(),j("Institution ".concat(e," unverified successfully!")),E(s=>s.map(s=>s.walletAddress.toLowerCase()===t.toLowerCase()&&s.name===e?{...s,verified:!1}:s))}catch(e){v(e.reason||e.message||"Failed to unverify institution.")}finally{b(!1)}}return e&&s?(0,i.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-[#0b0f1a] to-black text-white",children:(0,i.jsxs)("div",{className:"mx-auto max-w-5xl px-6 py-12",children:[(0,i.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,i.jsx)(n(),{href:"/",className:"text-xl font-semibold tracking-tight",children:"CERTHUB"}),(0,i.jsx)("div",{className:"text-sm",children:(0,i.jsxs)("span",{className:"rounded-md bg-emerald-500/10 px-3 py-1 text-emerald-300",children:["✅ Agent: ",e.slice(0,6),"…",e.slice(-4)]})})]}),(0,i.jsxs)("section",{className:"mb-10",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold sm:text-4xl",children:"Verify Institutions"}),(0,i.jsx)("p",{className:"mt-2 text-white/70",children:"Authenticate institutions on the Hyperion Testnet to enable them to issue certificates. Only factory agents can access this page."})]}),(0,i.jsxs)("section",{className:"mb-12 rounded-xl border border-white/10 bg-white/5 p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Verify New Institution"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),I()},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Institution Name *"}),(0,i.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:h.institutionName,onChange:e=>C("institutionName",e.target.value),placeholder:"Havard",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Institution Wallet Address *"}),(0,i.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:h.institutionWalletAddress,onChange:e=>C("institutionWalletAddress",e.target.value),placeholder:"0x...",required:!0})]}),(0,i.jsx)("div",{className:"md:col-span-2",children:(0,i.jsx)("button",{type:"submit",disabled:y||!k,className:"rounded-lg bg-emerald-600 px-6 py-2 text-sm font-semibold text-white hover:bg-emerald-700 disabled:opacity-50",children:y?"Verifying…":"Verify Institution"})})]}),g&&(0,i.jsx)("div",{className:"mt-4 rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-300",children:g}),N&&(0,i.jsx)("div",{className:"mt-4 rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-3 text-sm text-emerald-300",children:N})]}),(0,i.jsxs)("section",{className:"rounded-xl border border-white/10 bg-white/5 p-6",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Registered Institutions"}),0===A.length?(0,i.jsx)("p",{className:"text-white/70",children:"No institutions registered yet."}):(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"w-full text-sm",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"border-b border-white/10",children:[(0,i.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Institution Name"}),(0,i.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Wallet Address"}),(0,i.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Type"}),(0,i.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Industry"}),(0,i.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Status"}),(0,i.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Actions"})]})}),(0,i.jsx)("tbody",{children:A.map(e=>(0,i.jsxs)("tr",{className:"border-b border-white/5",children:[(0,i.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,i.jsx)("td",{className:"py-3 px-4",children:(0,i.jsxs)("a",{href:"".concat(m.F.blockExplorers.default.url,"/address/").concat(e.walletAddress),target:"_blank",rel:"noreferrer",className:"underline hover:text-emerald-200",children:[e.walletAddress.slice(0,6),"…",e.walletAddress.slice(-4)]})}),(0,i.jsx)("td",{className:"py-3 px-4",children:e.institutionType}),(0,i.jsx)("td",{className:"py-3 px-4",children:e.industryOrSector}),(0,i.jsx)("td",{className:"py-3 px-4",children:e.verified?(0,i.jsxs)("span",{className:"flex items-center gap-1 text-emerald-300",children:[(0,i.jsx)(x,{size:16})," Verified"]}):(0,i.jsxs)("span",{className:"flex items-center gap-1 text-yellow-300",children:[(0,i.jsx)(p,{size:16})," Pending"]})}),(0,i.jsx)("td",{className:"py-3 px-4",children:e.verified?(0,i.jsx)("button",{onClick:()=>S(e.name,e.walletAddress),disabled:y,className:"rounded-lg bg-red-600 px-4 py-1 text-sm text-white hover:bg-red-700 disabled:opacity-50",children:"Unverify"}):(0,i.jsx)("button",{onClick:()=>{w({institutionName:e.name,institutionWalletAddress:e.walletAddress}),I()},disabled:y,className:"rounded-lg bg-emerald-600 px-4 py-1 text-sm text-white hover:bg-emerald-700 disabled:opacity-50",children:"Verify"})})]},"".concat(e.name,"-").concat(e.walletAddress)))})]})})]})]})}):(0,i.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-[#0b0f1a] to-black text-white",children:(0,i.jsxs)("div",{className:"mx-auto max-w-4xl px-6 py-12",children:[(0,i.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,i.jsx)(n(),{href:"/",className:"text-xl font-semibold tracking-tight",children:"CERTHUB"}),(0,i.jsx)("div",{className:"text-sm",children:e?(0,i.jsxs)("span",{className:"rounded-md bg-emerald-500/10 px-3 py-1 text-emerald-300",children:["✅ Connected: ",e.slice(0,6),"…",e.slice(-4)]}):(0,i.jsx)("span",{className:"rounded-md bg-yellow-500/10 px-3 py-1 text-yellow-300",children:"⚠️ Wallet not connected"})})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 p-6 text-center",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold text-red-300",children:"Not Authorized"}),(0,i.jsx)("p",{className:"mt-2 text-white/70",children:"This page is restricted to factory agents. Please connect an authorized wallet or return to the homepage."}),(0,i.jsx)(n(),{href:"/",className:"mt-4 inline-block rounded-lg bg-emerald-600 px-6 py-2 text-sm font-semibold text-white hover:bg-emerald-700",children:"Back to Home"})]})]})})}},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var i=s(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,i.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:o="",children:c,iconNode:u,...m}=e;return(0,i.createElement)("svg",{ref:t,...a,width:r,height:r,stroke:s,strokeWidth:d?24*Number(l)/Number(r):l,className:n("lucide",o),...m},[...u.map(e=>{let[t,s]=e;return(0,i.createElement)(t,s)}),...Array.isArray(c)?c:[c]])}),d=(e,t)=>{let s=(0,i.forwardRef)((s,a)=>{let{className:d,...o}=s;return(0,i.createElement)(l,{ref:a,iconNode:t,className:n("lucide-".concat(r(e)),d),...o})});return s.displayName="".concat(e),s}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,41,172,441,684,358],()=>t(8450)),_N_E=e.O()}]);