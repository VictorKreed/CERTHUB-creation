(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{1973:(e,t,r)=>{"use strict";r.d(t,{k:()=>a});var i=r(9592),n=r(3041);class a extends n._y{#e;#t;constructor(e,t,r){let n=Object.assign({},null!=r?r:{},{batchMaxCount:1});(0,i.MR)(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,n),this.#t=null,r&&r.providerInfo&&(this.#t=r.providerInfo),this.#e=async(t,r)=>{let i={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:i});try{let t=await e.request(i);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(t){let e=Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=i,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){(0,i.MR)(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);let t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){let e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new a(e.provider);let t=e.window?e.window:"undefined"!=typeof window?window:null;if(null==t)return null;let r=e.anyProvider;if(r&&t.ethereum)return new a(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;let n=e.timeout?e.timeout:300;return 0===n?null:await new Promise((s,l)=>{let d=[],o=e=>{d.push(e.detail),r&&c()},c=()=>{if(clearTimeout(u),d.length){if(e&&e.filter){let t=e.filter(d.map(e=>Object.assign({},e.info)));if(null==t)s(null);else if(t instanceof a)s(t);else{let e=null;if(t.uuid&&(e=d.filter(e=>t.uuid===e.info.uuid)[0]),e){let{provider:t,info:r}=e;s(new a(t,void 0,{providerInfo:r}))}else l((0,i.xz)("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{let{provider:e,info:t}=d[0];s(new a(e,void 0,{providerInfo:t}))}}else s(null);t.removeEventListener("eip6963:announceProvider",o)},u=setTimeout(()=>{c()},n);t.addEventListener("eip6963:announceProvider",o),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}},4274:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var i=r(5155),n=r(6874),a=r.n(n),s=r(2115),l=r(3888),d=r(5062),o=r(2037),c=r(1973),u=r(6872);let m="0x20a55",h={"0x20a55":"Hyperion Testnet (133717)"},p={chainId:m,chainName:"Hyperion Testnet",nativeCurrency:{name:"tMETIS",symbol:"tMETIS",decimals:18},rpcUrls:["https://hyperion-testnet.metisdevops.link"],blockExplorerUrls:["https://hyperion-testnet-explorer.metisdevops.link"]},f=[{type:"function",name:"claimCertificate",stateMutability:"nonpayable",inputs:[{name:"studentName",type:"string"},{name:"institutionName",type:"string"},{name:"certificateName",type:"string"},{name:"certificateId",type:"string"},{name:"proof",type:"bytes32[]"},{name:"recipientWalletAddress",type:"address"},{name:"studentId",type:"uint256"},{name:"certificateYear",type:"uint256"},{name:"institutionWalletAddress",type:"address"}],outputs:[]},{type:"function",name:"verifyCertificate",stateMutability:"view",inputs:[{name:"recipientAddress",type:"address"},{name:"certificateName",type:"string"},{name:"certificateYear",type:"uint256"},{name:"institutionWalletAddress",type:"address"}],outputs:[{components:[{name:"RecipientName",type:"string"},{name:"CertificateName",type:"string"},{name:"CertificateYear",type:"uint256"},{name:"CertificateId",type:"string"},{name:"RecipientId",type:"uint256"},{name:"InstitutionName",type:"string"},{name:"Claimed",type:"bool"}],type:"tuple"}]},{type:"event",name:"CertificateDeployed",inputs:[{indexed:!0,name:"certificateAddress",type:"address"},{indexed:!0,name:"institutionAddress",type:"address"},{indexed:!1,name:"institutionName",type:"string"},{indexed:!1,name:"certificateName",type:"string"},{indexed:!1,name:"year",type:"uint256"}],anonymous:!1}];new l.KA(f);let x={studentName:"",studentId:"",recipientAddress:"",institutionName:"",institutionWalletAddress:"",certificateName:"",certificateId:"",certificateYear:"",proofText:""};function g(){let[e,t]=(0,s.useState)(x),[r,n]=(0,s.useState)(null),[l,g]=(0,s.useState)(null),[w,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[N,j]=(0,s.useState)(null),[C,I]=(0,s.useState)(null),[S,E]=(0,s.useState)(null),[A,k]=(0,s.useState)(null),q=!!window.ethereum,T=(l||"").toLowerCase()===m.toLowerCase(),_=(0,s.useMemo)(()=>r?r.slice(0,6)+"…"+r.slice(-4):"",[r]);async function P(){if(!q){j({type:"error",message:"No wallet detected. Install MetaMask or a compatible wallet."});return}b(!0);try{var e,t;let r=window.ethereum,i=await (null===(e=r.request)||void 0===e?void 0:e.call(r,{method:"eth_requestAccounts"}));if(!(null==i?void 0:i.length))throw Error("No account selected in wallet.");n(i[0]);let a=await (null===(t=r.request)||void 0===t?void 0:t.call(r,{method:"eth_chainId"}));g(String(a)),j({type:"idle",message:"Wallet connected."})}catch(e){j({type:"error",message:(null==e?void 0:e.message)||"Failed to connect wallet."})}finally{b(!1)}}async function R(){var e,t,r;try{await (null===(e=window.ethereum)||void 0===e?void 0:e.request({method:"wallet_switchEthereumChain",params:[{chainId:m}]}))}catch(e){if((null==e?void 0:e.code)===4902||/Unrecognized chain ID/i.test((null==e?void 0:e.message)||""))try{await (null===(t=window.ethereum)||void 0===t?void 0:t.request({method:"wallet_addEthereumChain",params:[p]})),await (null===(r=window.ethereum)||void 0===r?void 0:r.request({method:"wallet_switchEthereumChain",params:[{chainId:m}]}))}catch(e){j({type:"error",message:"Failed to add Hyperion Testnet. Please add Chain ID 133717 (tMETIS) to MetaMask."})}else j({type:"error",message:"Failed to switch network: ".concat((null==e?void 0:e.message)||"Unknown error")})}}function M(e,r){t(t=>({...t,[e]:r})),"recipientAddress"===e&&E(null)}function O(e){if(!(0,d.PW)(e))throw Error("Invalid address: ".concat(e));return(0,o.b)(e)}function W(e){try{let t=JSON.parse(e);if(Array.isArray(t))return t.map(e=>String(e))}catch(e){}return e.split(/[,\s]+/g).map(e=>e.trim()).filter(Boolean)}function D(e){if(!C)return null;let t=O(e),r=C.proofs[t];return Array.isArray(r)?r:null}async function L(t){var r;k(null),E(null),I(null);let i=null===(r=t.target.files)||void 0===r?void 0:r[0];if(i)try{let t=await i.text(),r=JSON.parse(t);if(!(null==r?void 0:r.root)||!(null==r?void 0:r.proofs)||"object"!=typeof r.proofs)throw Error("Invalid proofs JSON format.");if(I(r),e.recipientAddress.trim())try{let t=D(e.recipientAddress.trim());t&&E(t)}catch(e){k((null==e?void 0:e.message)||"Failed to derive proof for the recipient.")}}catch(e){k((null==e?void 0:e.message)||"Failed to read proofs file.")}}async function U(r){if(r.preventDefault(),!T){j({type:"error",message:"Please switch to ".concat(h[m]," before claiming.")});return}let i=function(){try{if(!e.studentName.trim())return"Student Name is required.";if(!/^\d+$/.test(e.studentId.trim()))return"Student ID must be a whole number.";if(!e.certificateName.trim())return"Certificate Name is required.";if(!e.certificateId.trim())return"Certificate ID is required.";if(!/^\d+$/.test(e.certificateYear.trim()))return"Year must be a whole number.";if(!e.institutionName.trim())return"Institution Name is required.";if(O(e.recipientAddress.trim()),O(e.institutionWalletAddress.trim()),S&&S.length);else if(!e.proofText.trim())return"Please upload a proofs.json and/or paste a proof array.";else if(!W(e.proofText.trim()).length)return"Proof array is empty.";return null}catch(e){return(null==e?void 0:e.message)||"Invalid input."}}();if(i){j({type:"error",message:i});return}try{y(!0),j({type:"pending",message:"Submitting claim transaction…"});let r=new c.k(window.ethereum),i=await r.getSigner(),n=new u.NZ("0xC04b063F5Fd9F03B67359DE79d3b18a55f73cB0c",f,i),a=(S&&S.length?S:W(e.proofText)).map(e=>String(e)),s=await n.claimCertificate(e.studentName.trim(),e.institutionName.trim(),e.certificateName.trim(),e.certificateId.trim(),a,O(e.recipientAddress.trim()),BigInt(e.studentId.trim()),BigInt(e.certificateYear.trim()),O(e.institutionWalletAddress.trim())),l=await s.wait();j({type:"success",message:"Certificate claimed successfully.",tx:String((null==l?void 0:l.hash)||(null==s?void 0:s.hash)||"")}),E(null),I(null),k(null),t(e=>({...e,proofText:""}))}catch(e){j({type:"error",message:(null==e?void 0:e.shortMessage)||(null==e?void 0:e.reason)||(null==e?void 0:e.message)||"Failed to claim."})}finally{y(!1)}}return(0,s.useEffect)(()=>{var e,t,r;if(!q)return;let i=window.ethereum;null===(e=i.request)||void 0===e||e.call(i,{method:"eth_chainId"}).then(e=>g(String(e))).catch(()=>{});let a=e=>{var t;return n(null!==(t=null==e?void 0:e[0])&&void 0!==t?t:null)},s=e=>g(String(e));return null===(t=i.on)||void 0===t||t.call(i,"accountsChanged",a),null===(r=i.on)||void 0===r||r.call(i,"chainChanged",s),()=>{var e,t;null===(e=i.removeListener)||void 0===e||e.call(i,"accountsChanged",a),null===(t=i.removeListener)||void 0===t||t.call(i,"chainChanged",s)}},[q]),(0,i.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-[#0b0f1a] to-black text-white",children:(0,i.jsxs)("div",{className:"mx-auto max-w-4xl px-6 py-12",children:[(0,i.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,i.jsx)(a(),{href:"/",className:"text-xl font-semibold tracking-tight",children:"CERTHUB"}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("button",{onClick:P,disabled:w,className:"rounded-lg bg-[#1f3aaa] px-4 py-2 text-sm font-semibold text-white hover:bg-[#2a47a1] disabled:opacity-60",children:r?"Connected: ".concat(_):w?"Connecting…":"Connect Wallet"})})]}),r&&(0,i.jsx)("div",{className:"mb-6 rounded-lg border border-white/15 bg-white/5 p-4 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"mr-2 inline-block h-2.5 w-2.5 rounded-full ".concat(T?"bg-emerald-400":"bg-red-400")}),(0,i.jsxs)("span",{className:"text-sm",children:["Network: ",h[null!=l?l:""]||"Unknown (".concat(l,")")]})]}),!T&&(0,i.jsxs)("button",{onClick:R,className:"rounded-md bg-orange-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-orange-700",children:["Switch to ",h[m]]})]})}),(null==N?void 0:N.message)&&(0,i.jsx)("div",{className:["mb-6 rounded-lg border px-4 py-3 text-sm","error"===N.type&&"border-red-400/40 bg-red-500/10 text-red-200","success"===N.type&&"border-emerald-400/40 bg-emerald-500/10 text-emerald-200","pending"===N.type&&"border-blue-400/40 bg-blue-500/10 text-blue-200","idle"===N.type&&"border-white/15 bg-white/5 text-white/90"].filter(Boolean).join(" "),role:"status",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("span",{children:N.message}),N.tx&&(0,i.jsx)(a(),{href:"".concat("https://hyperion-testnet-explorer.metisdevops.link/tx/").concat(N.tx),target:"_blank",className:"underline",children:"View Transaction"})]})}),(0,i.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-sm",children:[(0,i.jsx)("h1",{className:"mb-6 text-center text-2xl font-bold",children:"Claim a Certificate"}),(0,i.jsxs)("form",{className:"grid grid-cols-1 gap-5",onSubmit:U,children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Recipient Wallet *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.recipientAddress,onChange:e=>M("recipientAddress",e.target.value),placeholder:"0x…",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Student ID *"}),(0,i.jsx)("input",{type:"number",min:0,className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.studentId,onChange:e=>M("studentId",e.target.value),placeholder:"e.g., 123456",required:!0})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Student Name *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.studentName,onChange:e=>M("studentName",e.target.value),placeholder:"Your full name",required:!0})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Institution Name *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.institutionName,onChange:e=>M("institutionName",e.target.value),placeholder:"e.g., Alpha University",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Institution Wallet *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.institutionWalletAddress,onChange:e=>M("institutionWalletAddress",e.target.value),placeholder:"0x…",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Certificate Name *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.certificateName,onChange:e=>M("certificateName",e.target.value),placeholder:"e.g., Advanced Solidity",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Certificate ID *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.certificateId,onChange:e=>M("certificateId",e.target.value),placeholder:"e.g., CERT-2025-0001",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Certificate Year *"}),(0,i.jsx)("input",{type:"number",min:1900,max:3e3,className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.certificateYear,onChange:e=>M("certificateYear",e.target.value),placeholder:"2025",required:!0})]})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[(0,i.jsxs)("p",{className:"mb-3 text-sm text-white/80",children:["Upload the ",(0,i.jsx)("code",{children:"merkle-proofs-*.json"})," you received or paste your proof array."]}),(0,i.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[(0,i.jsxs)("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-md border border-white/15 bg-white/10 px-3 py-2 text-sm hover:bg-white/15",children:[(0,i.jsx)("input",{type:"file",accept:"application/json",onChange:L,className:"hidden"}),(0,i.jsx)("span",{children:"Upload proofs.json"})]}),(0,i.jsx)("button",{type:"button",onClick:function(){try{k(null);let t=D(e.recipientAddress.trim());if(!t||!t.length){E(null),k("No proof found in file for that recipient address.");return}E(t)}catch(e){E(null),k((null==e?void 0:e.message)||"Failed to derive proof.")}},disabled:!C||!e.recipientAddress.trim(),className:"rounded-md border border-white/15 bg-white/10 px-3 py-2 text-sm hover:bg-white/15 disabled:opacity-60",children:"Derive proof for recipient"}),C&&(0,i.jsxs)("span",{className:"text-xs text-white/70",children:["Loaded ",C.count," addresses • root ",C.root.slice(0,10),"…"]})]}),A&&(0,i.jsx)("div",{className:"mt-2 rounded-md border border-red-400/40 bg-red-500/10 p-2 text-xs text-red-200",children:A}),(0,i.jsxs)("div",{className:"mt-3",children:[(0,i.jsx)("label",{className:"text-xs text-white/70",children:"Or paste proof (comma‑separated or JSON array of 0x hashes)"}),(0,i.jsx)("textarea",{className:"mt-1 min-h-[80px] w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.proofText,onChange:e=>M("proofText",e.target.value),placeholder:'["0xabc…","0xdef…"] or 0xabc…, 0xdef…'})]}),S&&(0,i.jsxs)("div",{className:"mt-3 rounded-md border border-emerald-400/40 bg-emerald-500/10 p-2 text-xs text-emerald-200 break-all",children:["Derived proof for ",e.recipientAddress,": [",S.join(", "),"]"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-2",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{t(x),I(null),E(null),k(null)},disabled:v,className:"rounded-lg border border-white/20 bg-white/10 px-4 py-2 text-sm font-semibold text-white hover:bg-white/15 disabled:opacity-60",children:"Reset"}),(0,i.jsx)("button",{type:"submit",disabled:v||!r||!T,className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-700 disabled:opacity-60",children:v?"Submitting…":"Claim Certificate"})]})]})]}),(0,i.jsx)("div",{className:"mt-6 flex gap-3",children:(0,i.jsx)(a(),{href:"/",className:"rounded-lg bg-[#1f3aaa] px-4 py-2 text-sm font-semibold text-white hover:bg-[#2a47a1]",children:"Back to Home"})})]})})}},7668:(e,t,r)=>{Promise.resolve().then(r.bind(r,4274))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,41,441,684,358],()=>t(7668)),_N_E=e.O()}]);