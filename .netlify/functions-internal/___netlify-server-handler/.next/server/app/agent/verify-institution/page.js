(()=>{var e={};e.id=583,e.ids=[583],e.modules={581:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});let r={id:133717,name:"Metis Hyperion Testnet",nativeCurrency:{name:"Test Metis",symbol:"tMETIS",decimals:18},rpcUrls:{default:{http:["https://hyperion-testnet.metisdevops.link"]}},blockExplorers:{default:{name:"Hyperion Explorer",url:"https://hyperion-testnet-explorer.metisdevops.link"}},testnet:!0}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3648:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/agent/verify-institution/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/agent/verify-institution/page.tsx","default")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6066:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=s(5239),i=s(8088),n=s(8170),a=s.n(n),l=s(893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o={children:["",{children:["agent",{children:["verify-institution",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3648)),"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/agent/verify-institution/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8014)),"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/agent/verify-institution/page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/agent/verify-institution/page",pathname:"/agent/verify-institution",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7598:e=>{"use strict";e.exports=require("node:crypto")},7939:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(687),i=s(5814),n=s.n(i),a=s(3210);s(7471),s(598);var l=s(5762),d=s(1543),o=s(3198),c=s(581),x=s(2688);let m=(0,x.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),u=(0,x.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),p={institutionName:"",institutionWalletAddress:""};function h(){let[e,t]=(0,a.useState)(null),[s,i]=(0,a.useState)(!1),[x,h]=(0,a.useState)(p),[f,b]=(0,a.useState)(!1),[y,g]=(0,a.useState)(null),[N,j]=(0,a.useState)(null),[v,w]=(0,a.useState)([]),E=(0,l.PW)(x.institutionWalletAddress)&&x.institutionName.trim().length>1;function T(e,t){h(s=>({...s,[e]:t}))}async function C(){if(!E){g("Please provide a valid institution name and wallet address.");return}try{b(!0),g(null),j(null);let e=await (0,o.C8)(),t=await e.verifyInstitution(x.institutionName,(0,d.b)(x.institutionWalletAddress));await t.wait(),j(`Institution ${x.institutionName} verified successfully!`),h(p),w(e=>e.map(e=>e.name===x.institutionName&&e.walletAddress.toLowerCase()===(0,d.b)(x.institutionWalletAddress).toLowerCase()?{...e,verified:!0}:e))}catch(e){g(e.reason||e.message||"Failed to verify institution. Ensure details match registration records.")}finally{b(!1)}}async function k(e,t){try{b(!0),g(null),j(null);let s=await (0,o.C8)(),r=await s.unverifyInstitution(e,(0,d.b)(t));await r.wait(),j(`Institution ${e} unverified successfully!`),w(s=>s.map(s=>s.walletAddress.toLowerCase()===t.toLowerCase()&&s.name===e?{...s,verified:!1}:s))}catch(e){g(e.reason||e.message||"Failed to unverify institution.")}finally{b(!1)}}return e&&s?(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-[#0b0f1a] to-black text-white",children:(0,r.jsxs)("div",{className:"mx-auto max-w-5xl px-6 py-12",children:[(0,r.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,r.jsx)(n(),{href:"/",className:"text-xl font-semibold tracking-tight",children:"CERTHUB"}),(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsxs)("span",{className:"rounded-md bg-emerald-500/10 px-3 py-1 text-emerald-300",children:["✅ Agent: ",e.slice(0,6),"…",e.slice(-4)]})})]}),(0,r.jsxs)("section",{className:"mb-10",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold sm:text-4xl",children:"Verify Institutions"}),(0,r.jsx)("p",{className:"mt-2 text-white/70",children:"Authenticate institutions on the Hyperion Testnet to enable them to issue certificates. Only factory agents can access this page."})]}),(0,r.jsxs)("section",{className:"mb-12 rounded-xl border border-white/10 bg-white/5 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Verify New Institution"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),C()},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Institution Name *"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:x.institutionName,onChange:e=>T("institutionName",e.target.value),placeholder:"Havard",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-white/70",children:"Institution Wallet Address *"}),(0,r.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:x.institutionWalletAddress,onChange:e=>T("institutionWalletAddress",e.target.value),placeholder:"0x...",required:!0})]}),(0,r.jsx)("div",{className:"md:col-span-2",children:(0,r.jsx)("button",{type:"submit",disabled:f||!E,className:"rounded-lg bg-emerald-600 px-6 py-2 text-sm font-semibold text-white hover:bg-emerald-700 disabled:opacity-50",children:f?"Verifying…":"Verify Institution"})})]}),y&&(0,r.jsx)("div",{className:"mt-4 rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-300",children:y}),N&&(0,r.jsx)("div",{className:"mt-4 rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-3 text-sm text-emerald-300",children:N})]}),(0,r.jsxs)("section",{className:"rounded-xl border border-white/10 bg-white/5 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Registered Institutions"}),0===v.length?(0,r.jsx)("p",{className:"text-white/70",children:"No institutions registered yet."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-white/10",children:[(0,r.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Institution Name"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Wallet Address"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Type"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Industry"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Status"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left text-white/70",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:v.map(e=>(0,r.jsxs)("tr",{className:"border-b border-white/5",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("a",{href:`${c.F.blockExplorers.default.url}/address/${e.walletAddress}`,target:"_blank",rel:"noreferrer",className:"underline hover:text-emerald-200",children:[e.walletAddress.slice(0,6),"…",e.walletAddress.slice(-4)]})}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.institutionType}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.industryOrSector}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.verified?(0,r.jsxs)("span",{className:"flex items-center gap-1 text-emerald-300",children:[(0,r.jsx)(m,{size:16})," Verified"]}):(0,r.jsxs)("span",{className:"flex items-center gap-1 text-yellow-300",children:[(0,r.jsx)(u,{size:16})," Pending"]})}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.verified?(0,r.jsx)("button",{onClick:()=>k(e.name,e.walletAddress),disabled:f,className:"rounded-lg bg-red-600 px-4 py-1 text-sm text-white hover:bg-red-700 disabled:opacity-50",children:"Unverify"}):(0,r.jsx)("button",{onClick:()=>{h({institutionName:e.name,institutionWalletAddress:e.walletAddress}),C()},disabled:f,className:"rounded-lg bg-emerald-600 px-4 py-1 text-sm text-white hover:bg-emerald-700 disabled:opacity-50",children:"Verify"})})]},`${e.name}-${e.walletAddress}`))})]})})]})]})}):(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-[#0b0f1a] to-black text-white",children:(0,r.jsxs)("div",{className:"mx-auto max-w-4xl px-6 py-12",children:[(0,r.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,r.jsx)(n(),{href:"/",className:"text-xl font-semibold tracking-tight",children:"CERTHUB"}),(0,r.jsx)("div",{className:"text-sm",children:e?(0,r.jsxs)("span",{className:"rounded-md bg-emerald-500/10 px-3 py-1 text-emerald-300",children:["✅ Connected: ",e.slice(0,6),"…",e.slice(-4)]}):(0,r.jsx)("span",{className:"rounded-md bg-yellow-500/10 px-3 py-1 text-yellow-300",children:"⚠️ Wallet not connected"})})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-red-500/30 bg-red-500/10 p-6 text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-red-300",children:"Not Authorized"}),(0,r.jsx)("p",{className:"mt-2 text-white/70",children:"This page is restricted to factory agents. Please connect an authorized wallet or return to the homepage."}),(0,r.jsx)(n(),{href:"/",className:"mt-4 inline-block rounded-lg bg-emerald-600 px-6 py-2 text-sm font-semibold text-white hover:bg-emerald-700",children:"Back to Home"})]})]})})}},8310:(e,t,s)=>{Promise.resolve().then(s.bind(s,7939))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9854:(e,t,s)=>{Promise.resolve().then(s.bind(s,3648))}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,872,471,928,198],()=>s(6066));module.exports=r})();