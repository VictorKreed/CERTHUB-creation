(()=>{var e={};e.id=254,e.ids=[254],e.modules={411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(687),i=r(5814),a=r.n(i),n=r(3210),l=r(3198),o=r(5762),d=r(1543);let c={institutionName:"",certificateName:"",certificateId:"",uri:"",year:"",quantity:"",recipients:"",verifiedWalletAddress:""};function u(){let[e,t]=(0,n.useState)(c),[r,i]=(0,n.useState)(null),[u,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[x,f]=(0,n.useState)(null),[g,b]=(0,n.useState)(null),[w,v]=(0,n.useState)(null),[y,j]=(0,n.useState)(null),[N,C]=(0,n.useState)(null),[E,T]=(0,n.useState)(null),k=(0,n.useMemo)(()=>!!r&&r.toLowerCase()===e.verifiedWalletAddress.toLowerCase(),[r,e.verifiedWalletAddress]),P=(0,n.useMemo)(()=>{let t;let r=Number(e.year),s=Number(e.quantity);return e.institutionName.trim().length>1&&e.certificateName.trim().length>1&&e.certificateId.trim().length>1&&e.uri.trim().length>3&&r>=1900&&r<=3e3&&s>=1&&(t=e.verifiedWalletAddress,/^0x[a-fA-F0-9]{40}$/.test(t))&&e.recipients.trim().length>0},[e]);function q(e,r){t(t=>({...t,[e]:r}))}async function R(){v(null),j(null),C(null),T(null);let t=e.recipients.split(/[\s,]+/).map(e=>e.trim()).filter(e=>e&&(0,o.PW)(e));if(0===t.length){v("Please provide at least one valid Ethereum address.");return}try{p(!0);let r=await fetch("/api/merkle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addresses:t,sortPairs:!0})}),s=await r.json();if(!r.ok||!s?.root)throw Error("Failed to generate Merkle root.");j(s.root),C(s.count),T(s);let i=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),a=URL.createObjectURL(i),n=document.createElement("a");n.href=a,n.download=`proofs-${e.certificateId||"certificate"}.json`,n.click(),URL.revokeObjectURL(a)}catch(e){v(e.message||"Failed to generate Merkle root.")}finally{p(!1)}}async function _(t){if(t.preventDefault(),v(null),f(null),b(null),!P){v("Please complete all required fields with valid values.");return}if(!k){v("The connected wallet must match the verified wallet address.");return}if(!y){v("Please generate a Merkle root first.");return}try{m(!0);let t=await (0,l.C8)(),r=await t.createCertificate(e.institutionName,e.certificateName,e.certificateId,e.uri,y,Number(e.year),Number(e.quantity),(0,d.b)(e.verifiedWalletAddress)),s=await r.wait();f(s?.hash??r?.hash??null);let i=s.logs.filter(e=>e.address.toLowerCase()===t.address).map(e=>t.interface.parseLog(e)).find(e=>e?.name==="CertificateDeployed");i&&b(i.args.certificateAddress)}catch(e){v(e?.reason||e?.shortMessage||e?.message||"Transaction failed. Please check your wallet and try again.")}finally{m(!1)}}return(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-[#0b0f1a] to-black text-white",children:(0,s.jsxs)("div",{className:"mx-auto max-w-4xl px-6 py-12",children:[(0,s.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,s.jsx)(a(),{href:"/",className:"text-xl font-semibold tracking-tight",children:"CERTHUB"}),(0,s.jsx)("div",{className:"text-sm",children:r?(0,s.jsxs)("span",{className:"rounded-md bg-emerald-500/10 px-3 py-1 text-emerald-300",children:["✅ Connected: ",r.slice(0,6),"…",r.slice(-4)]}):(0,s.jsx)("span",{className:"rounded-md bg-yellow-500/10 px-3 py-1 text-yellow-300",children:"⚠️ Please connect your wallet"})})]}),(0,s.jsxs)("section",{className:"mb-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold sm:text-4xl",children:"Issue a New Certificate"}),(0,s.jsx)("p",{className:"mt-2 text-white/70",children:"Deploy a new certificate clone on the Hyperion Testnet. Provide details and recipient addresses to generate a Merkle root for claiming."})]}),(0,s.jsxs)("form",{onSubmit:_,className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-white/70",children:"Institution Name *"}),(0,s.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.institutionName,onChange:e=>q("institutionName",e.target.value),placeholder:"University of Blockchain",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-white/70",children:"Certificate Name *"}),(0,s.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.certificateName,onChange:e=>q("certificateName",e.target.value),placeholder:"Advanced Solidity",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-white/70",children:"Certificate ID *"}),(0,s.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.certificateId,onChange:e=>q("certificateId",e.target.value),placeholder:"CERT-2025-0001",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-white/70",children:"Year *"}),(0,s.jsx)("input",{type:"number",min:1900,max:3e3,className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.year,onChange:e=>q("year",e.target.value),placeholder:"2025",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-white/70",children:"Token Quantity *"}),(0,s.jsx)("input",{type:"number",min:1,className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.quantity,onChange:e=>q("quantity",e.target.value),placeholder:"100",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-white/70",children:"Verified Wallet Address *"}),(0,s.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.verifiedWalletAddress,onChange:e=>q("verifiedWalletAddress",e.target.value),placeholder:"0x...",required:!0}),r&&e.verifiedWalletAddress&&r.toLowerCase()===e.verifiedWalletAddress.toLowerCase()&&(0,s.jsx)("span",{className:"text-xs text-emerald-400",children:"Connected"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-sm text-white/70",children:"Certificate URI *"}),(0,s.jsx)("input",{className:"w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.uri,onChange:e=>q("uri",e.target.value),placeholder:"ipfs://... or https://example.com/metadata.json",required:!0})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"text-sm text-white/70",children:"Recipients (comma, space, or newline-separated addresses) *"}),(0,s.jsx)("textarea",{className:"w-full min-h-[100px] rounded-lg border border-white/10 bg-white/5 px-3 py-2 outline-none focus:ring-2 focus:ring-cyan-400",value:e.recipients,onChange:e=>q("recipients",e.target.value),placeholder:"0xabc..., 0xdef..., 0x123...",required:!0}),(0,s.jsx)("button",{type:"button",onClick:R,disabled:h||!e.recipients.trim(),className:"mt-3 rounded-lg border border-white/20 bg-white/10 px-4 py-2 text-sm text-white hover:bg-white/15 disabled:opacity-50",children:h?"Generating…":"Generate Merkle Root & Download Proofs"}),y&&(0,s.jsxs)("div",{className:"mt-2 text-xs text-emerald-400",children:["Merkle Root: ",y," (",N," recipients)"]})]})]}),w&&(0,s.jsx)("div",{className:"mt-4 rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-300",children:w}),x&&(0,s.jsxs)("div",{className:"mt-4 rounded-lg border border-emerald-500/30 bg-emerald-500/10 p-3 text-sm text-emerald-300",children:["Certificate deployed successfully."," ",(0,s.jsx)("a",{className:"underline hover:text-emerald-200",href:`https://hyperion-testnet-explorer.metisdevops.link/tx/${x}`,target:"_blank",rel:"noreferrer",children:"View Transaction"}),g&&(0,s.jsxs)(s.Fragment,{children:[" • ",(0,s.jsx)("a",{className:"underline hover:text-emerald-200",href:`https://hyperion-testnet-explorer.metisdevops.link/address/${g}`,target:"_blank",rel:"noreferrer",children:"View Contract"})]}),(0,s.jsx)("p",{className:"mt-2 text-xs text-white/60",children:"Recipients can now claim their certificates using the downloaded proofs."})]}),(0,s.jsxs)("div",{className:"mt-6 flex items-center gap-3",children:[(0,s.jsx)("button",{type:"submit",disabled:u||!P||!k||!y,className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-700 disabled:opacity-50",children:u?"Submitting…":"Issue Certificate"}),(0,s.jsx)(a(),{href:"/",className:"text-white/70 hover:underline",children:"Back to Home"})]})]}),(0,s.jsxs)("div",{className:"mt-10 rounded-xl border border-white/10 bg-white/5 p-4",children:[(0,s.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"What happens next?"}),(0,s.jsxs)("ul",{className:"list-disc space-y-1 pl-5 text-sm text-white/70",children:[(0,s.jsx)("li",{children:"A new certificate clone is deployed via the factory contract."}),(0,s.jsxs)("li",{children:["An on-chain ",(0,s.jsx)("em",{children:"CertificateDeployed"})," event is emitted."]}),(0,s.jsx)("li",{children:"Recipients can claim their certificates using the generated Merkle proofs."})]})]})]})})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/issue/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/issue/page.tsx","default")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3827:(e,t,r)=>{Promise.resolve().then(r.bind(r,1645))},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},6456:(e,t,r)=>{Promise.resolve().then(r.bind(r,411))},7598:e=>{"use strict";e.exports=require("node:crypto")},8675:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(5239),i=r(8088),a=r(8170),n=r.n(a),l=r(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d={children:["",{children:["issue",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1645)),"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/issue/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/issue/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/issue/page",pathname:"/issue",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,872,471,928,198],()=>r(8675));module.exports=s})();