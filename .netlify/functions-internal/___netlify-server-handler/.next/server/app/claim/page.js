(()=>{var e={};e.id=69,e.ids=[69],e.modules={44:(e,t,r)=>{Promise.resolve().then(r.bind(r,996))},193:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});var i=r(1065),s=r(7471);class n extends s._y{#e;#t;constructor(e,t,r){let s=Object.assign({},null!=r?r:{},{batchMaxCount:1});(0,i.MR)(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,s),this.#t=null,r&&r.providerInfo&&(this.#t=r.providerInfo),this.#e=async(t,r)=>{let i={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:i});try{let t=await e.request(i);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(t){let e=Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=i,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}get providerInfo(){return this.#t}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){(0,i.MR)(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#e(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);let t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#e("eth_requestAccounts",[])}catch(t){let e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new n(e.provider);let t=e.window?e.window:"undefined"!=typeof window?window:null;if(null==t)return null;let r=e.anyProvider;if(r&&t.ethereum)return new n(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;let s=e.timeout?e.timeout:300;return 0===s?null:await new Promise((a,o)=>{let l=[],d=e=>{l.push(e.detail),r&&c()},c=()=>{if(clearTimeout(u),l.length){if(e&&e.filter){let t=e.filter(l.map(e=>Object.assign({},e.info)));if(null==t)a(null);else if(t instanceof n)a(t);else{let e=null;if(t.uuid&&(e=l.filter(e=>t.uuid===e.info.uuid)[0]),e){let{provider:t,info:r}=e;a(new n(t,void 0,{providerInfo:r}))}else o((0,i.xz)("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{let{provider:e,info:t}=l[0];a(new n(e,void 0,{providerInfo:t}))}}else a(null);t.removeEventListener("eip6963:announceProvider",d)},u=setTimeout(()=>{c()},s);t.addEventListener("eip6963:announceProvider",d),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},996:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var i=r(687),s=r(5814),n=r.n(s),a=r(3210),o=r(718),l=r(5762),d=r(1543),c=r(193),u=r(598);let p="0x20a55",m={"0x20a55":"Hyperion Testnet (133717)"},h={chainId:p,chainName:"Hyperion Testnet",nativeCurrency:{name:"tMETIS",symbol:"tMETIS",decimals:18},rpcUrls:["https://hyperion-testnet.metisdevops.link"],blockExplorerUrls:["https://hyperion-testnet-explorer.metisdevops.link"]},x=[{type:"function",name:"claimCertificate",stateMutability:"nonpayable",inputs:[{name:"studentName",type:"string"},{name:"institutionName",type:"string"},{name:"certificateName",type:"string"},{name:"certificateId",type:"string"},{name:"proof",type:"bytes32[]"},{name:"recipientWalletAddress",type:"address"},{name:"studentId",type:"uint256"},{name:"certificateYear",type:"uint256"},{name:"institutionWalletAddress",type:"address"}],outputs:[]},{type:"function",name:"verifyCertificate",stateMutability:"view",inputs:[{name:"recipientAddress",type:"address"},{name:"certificateName",type:"string"},{name:"certificateYear",type:"uint256"},{name:"institutionWalletAddress",type:"address"}],outputs:[{components:[{name:"RecipientName",type:"string"},{name:"CertificateName",type:"string"},{name:"CertificateYear",type:"uint256"},{name:"CertificateId",type:"string"},{name:"RecipientId",type:"uint256"},{name:"InstitutionName",type:"string"},{name:"Claimed",type:"bool"}],type:"tuple"}]},{type:"event",name:"CertificateDeployed",inputs:[{indexed:!0,name:"certificateAddress",type:"address"},{indexed:!0,name:"institutionAddress",type:"address"},{indexed:!1,name:"institutionName",type:"string"},{indexed:!1,name:"certificateName",type:"string"},{indexed:!1,name:"year",type:"uint256"}],anonymous:!1}];new o.KA(x);let f={studentName:"",studentId:"",recipientAddress:"",institutionName:"",institutionWalletAddress:"",certificateName:"",certificateId:"",certificateYear:"",proofText:""};function g(){let[e,t]=(0,a.useState)(f),[r,s]=(0,a.useState)(null),[o,g]=(0,a.useState)(null),[b,w]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[N,j]=(0,a.useState)(null),[C,E]=(0,a.useState)(null),[I,T]=(0,a.useState)(null),[S,k]=(0,a.useState)(null),q=(o||"").toLowerCase()===p.toLowerCase(),A=(0,a.useMemo)(()=>r?r.slice(0,6)+"…"+r.slice(-4):"",[r]);async function P(){j({type:"error",message:"No wallet detected. Install MetaMask or a compatible wallet."})}async function _(){try{await window.ethereum?.request({method:"wallet_switchEthereumChain",params:[{chainId:p}]})}catch(e){if(e?.code===4902||/Unrecognized chain ID/i.test(e?.message||""))try{await window.ethereum?.request({method:"wallet_addEthereumChain",params:[h]}),await window.ethereum?.request({method:"wallet_switchEthereumChain",params:[{chainId:p}]})}catch{j({type:"error",message:"Failed to add Hyperion Testnet. Please add Chain ID 133717 (tMETIS) to MetaMask."})}else j({type:"error",message:`Failed to switch network: ${e?.message||"Unknown error"}`})}}function R(e,r){t(t=>({...t,[e]:r})),"recipientAddress"===e&&T(null)}function M(e){if(!(0,l.PW)(e))throw Error(`Invalid address: ${e}`);return(0,d.b)(e)}function U(e){try{let t=JSON.parse(e);if(Array.isArray(t))return t.map(e=>String(e))}catch{}return e.split(/[,\s]+/g).map(e=>e.trim()).filter(Boolean)}function B(e){if(!C)return null;let t=M(e),r=C.proofs[t];return Array.isArray(r)?r:null}async function O(t){k(null),T(null),E(null);let r=t.target.files?.[0];if(r)try{let t=await r.text(),i=JSON.parse(t);if(!i?.root||!i?.proofs||"object"!=typeof i.proofs)throw Error("Invalid proofs JSON format.");if(E(i),e.recipientAddress.trim())try{let t=B(e.recipientAddress.trim());t&&T(t)}catch(e){k(e?.message||"Failed to derive proof for the recipient.")}}catch(e){k(e?.message||"Failed to read proofs file.")}}async function D(r){if(r.preventDefault(),!q){j({type:"error",message:`Please switch to ${m[p]} before claiming.`});return}let i=function(){try{if(!e.studentName.trim())return"Student Name is required.";if(!/^\d+$/.test(e.studentId.trim()))return"Student ID must be a whole number.";if(!e.certificateName.trim())return"Certificate Name is required.";if(!e.certificateId.trim())return"Certificate ID is required.";if(!/^\d+$/.test(e.certificateYear.trim()))return"Year must be a whole number.";if(!e.institutionName.trim())return"Institution Name is required.";if(M(e.recipientAddress.trim()),M(e.institutionWalletAddress.trim()),I&&I.length);else if(!e.proofText.trim())return"Please upload a proofs.json and/or paste a proof array.";else if(!U(e.proofText.trim()).length)return"Proof array is empty.";return null}catch(e){return e?.message||"Invalid input."}}();if(i){j({type:"error",message:i});return}try{v(!0),j({type:"pending",message:"Submitting claim transaction…"});let r=new c.k(window.ethereum),i=await r.getSigner(),s=new u.NZ("0xC04b063F5Fd9F03B67359DE79d3b18a55f73cB0c",x,i),n=(I&&I.length?I:U(e.proofText)).map(e=>String(e)),a=await s.claimCertificate(e.studentName.trim(),e.institutionName.trim(),e.certificateName.trim(),e.certificateId.trim(),n,M(e.recipientAddress.trim()),BigInt(e.studentId.trim()),BigInt(e.certificateYear.trim()),M(e.institutionWalletAddress.trim())),o=await a.wait();j({type:"success",message:"Certificate claimed successfully.",tx:String(o?.hash||a?.hash||"")}),T(null),E(null),k(null),t(e=>({...e,proofText:""}))}catch(e){j({type:"error",message:e?.shortMessage||e?.reason||e?.message||"Failed to claim."})}finally{v(!1)}}return(0,i.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-[#0b0f1a] to-black text-white",children:(0,i.jsxs)("div",{className:"mx-auto max-w-4xl px-6 py-12",children:[(0,i.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,i.jsx)(n(),{href:"/",className:"text-xl font-semibold tracking-tight",children:"CERTHUB"}),(0,i.jsx)("div",{className:"flex items-center gap-2",children:(0,i.jsx)("button",{onClick:P,disabled:b,className:"rounded-lg bg-[#1f3aaa] px-4 py-2 text-sm font-semibold text-white hover:bg-[#2a47a1] disabled:opacity-60",children:r?`Connected: ${A}`:b?"Connecting…":"Connect Wallet"})})]}),r&&(0,i.jsx)("div",{className:"mb-6 rounded-lg border border-white/15 bg-white/5 p-4 backdrop-blur-sm",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:`mr-2 inline-block h-2.5 w-2.5 rounded-full ${q?"bg-emerald-400":"bg-red-400"}`}),(0,i.jsxs)("span",{className:"text-sm",children:["Network: ",m[o??""]||`Unknown (${o})`]})]}),!q&&(0,i.jsxs)("button",{onClick:_,className:"rounded-md bg-orange-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-orange-700",children:["Switch to ",m[p]]})]})}),N?.message&&(0,i.jsx)("div",{className:["mb-6 rounded-lg border px-4 py-3 text-sm","error"===N.type&&"border-red-400/40 bg-red-500/10 text-red-200","success"===N.type&&"border-emerald-400/40 bg-emerald-500/10 text-emerald-200","pending"===N.type&&"border-blue-400/40 bg-blue-500/10 text-blue-200","idle"===N.type&&"border-white/15 bg-white/5 text-white/90"].filter(Boolean).join(" "),role:"status",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)("span",{children:N.message}),N.tx&&(0,i.jsx)(n(),{href:`https://hyperion-testnet-explorer.metisdevops.link/tx/${N.tx}`,target:"_blank",className:"underline",children:"View Transaction"})]})}),(0,i.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-sm",children:[(0,i.jsx)("h1",{className:"mb-6 text-center text-2xl font-bold",children:"Claim a Certificate"}),(0,i.jsxs)("form",{className:"grid grid-cols-1 gap-5",onSubmit:D,children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Recipient Wallet *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.recipientAddress,onChange:e=>R("recipientAddress",e.target.value),placeholder:"0x…",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Student ID *"}),(0,i.jsx)("input",{type:"number",min:0,className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.studentId,onChange:e=>R("studentId",e.target.value),placeholder:"e.g., 123456",required:!0})]}),(0,i.jsxs)("div",{className:"md:col-span-2",children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Student Name *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.studentName,onChange:e=>R("studentName",e.target.value),placeholder:"Your full name",required:!0})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Institution Name *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.institutionName,onChange:e=>R("institutionName",e.target.value),placeholder:"e.g., Alpha University",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Institution Wallet *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.institutionWalletAddress,onChange:e=>R("institutionWalletAddress",e.target.value),placeholder:"0x…",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Certificate Name *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.certificateName,onChange:e=>R("certificateName",e.target.value),placeholder:"e.g., Advanced Solidity",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Certificate ID *"}),(0,i.jsx)("input",{className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.certificateId,onChange:e=>R("certificateId",e.target.value),placeholder:"e.g., CERT-2025-0001",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm text-white/70",children:"Certificate Year *"}),(0,i.jsx)("input",{type:"number",min:1900,max:3e3,className:"mt-1 w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.certificateYear,onChange:e=>R("certificateYear",e.target.value),placeholder:"2025",required:!0})]})]}),(0,i.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[(0,i.jsxs)("p",{className:"mb-3 text-sm text-white/80",children:["Upload the ",(0,i.jsx)("code",{children:"merkle-proofs-*.json"})," you received or paste your proof array."]}),(0,i.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:gap-4",children:[(0,i.jsxs)("label",{className:"inline-flex cursor-pointer items-center gap-2 rounded-md border border-white/15 bg-white/10 px-3 py-2 text-sm hover:bg-white/15",children:[(0,i.jsx)("input",{type:"file",accept:"application/json",onChange:O,className:"hidden"}),(0,i.jsx)("span",{children:"Upload proofs.json"})]}),(0,i.jsx)("button",{type:"button",onClick:function(){try{k(null);let t=B(e.recipientAddress.trim());if(!t||!t.length){T(null),k("No proof found in file for that recipient address.");return}T(t)}catch(e){T(null),k(e?.message||"Failed to derive proof.")}},disabled:!C||!e.recipientAddress.trim(),className:"rounded-md border border-white/15 bg-white/10 px-3 py-2 text-sm hover:bg-white/15 disabled:opacity-60",children:"Derive proof for recipient"}),C&&(0,i.jsxs)("span",{className:"text-xs text-white/70",children:["Loaded ",C.count," addresses • root ",C.root.slice(0,10),"…"]})]}),S&&(0,i.jsx)("div",{className:"mt-2 rounded-md border border-red-400/40 bg-red-500/10 p-2 text-xs text-red-200",children:S}),(0,i.jsxs)("div",{className:"mt-3",children:[(0,i.jsx)("label",{className:"text-xs text-white/70",children:"Or paste proof (comma‑separated or JSON array of 0x hashes)"}),(0,i.jsx)("textarea",{className:"mt-1 min-h-[80px] w-full rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-white placeholder:text-white/50 outline-none focus:ring-2 focus:ring-cyan-400",value:e.proofText,onChange:e=>R("proofText",e.target.value),placeholder:'["0xabc…","0xdef…"] or 0xabc…, 0xdef…'})]}),I&&(0,i.jsxs)("div",{className:"mt-3 rounded-md border border-emerald-400/40 bg-emerald-500/10 p-2 text-xs text-emerald-200 break-all",children:["Derived proof for ",e.recipientAddress,": [",I.join(", "),"]"]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-2",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{t(f),E(null),T(null),k(null)},disabled:y,className:"rounded-lg border border-white/20 bg-white/10 px-4 py-2 text-sm font-semibold text-white hover:bg-white/15 disabled:opacity-60",children:"Reset"}),(0,i.jsx)("button",{type:"submit",disabled:y||!r||!q,className:"rounded-lg bg-emerald-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-emerald-700 disabled:opacity-60",children:y?"Submitting…":"Claim Certificate"})]})]})]}),(0,i.jsx)("div",{className:"mt-6 flex gap-3",children:(0,i.jsx)(n(),{href:"/",className:"rounded-lg bg-[#1f3aaa] px-4 py-2 text-sm font-semibold text-white hover:bg-[#2a47a1]",children:"Back to Home"})})]})})}},1630:e=>{"use strict";e.exports=require("http")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3964:(e,t,r)=>{Promise.resolve().then(r.bind(r,7338))},4075:e=>{"use strict";e.exports=require("zlib")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},7338:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/claim/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/claim/page.tsx","default")},7598:e=>{"use strict";e.exports=require("node:crypto")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var i=r(5239),s=r(8088),n=r(8170),a=r.n(n),o=r(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["claim",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,7338)),"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/claim/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/kreed/CERTHUBDEPLOYMENT_TEST/frontend3/CERTHUB-creation/app/claim/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/claim/page",pathname:"/claim",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[447,872,471,928],()=>r(9799));module.exports=i})();